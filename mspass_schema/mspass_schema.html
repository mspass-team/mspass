

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MsPASS Schema &mdash; MsPASS 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=f6245a2f"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="mspass::seismic::Seismogram" href="../cxx_api/mspass.seismic.Seismogram.html" />  

  <style>
    .wy-nav-content { max-width: 1600px; }
  </style>

  
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            MsPASS
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/quick_start.html">Getting Started in a Nutshell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/run_mspass_with_docker.html">Run MsPASS with Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/deploy_mspass_with_docker_compose.html">Deploy MsPASS with Docker Compose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/deploy_mspass_with_conda.html">Deploy MsPASS with Conda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/deploy_mspass_with_conda.html#advanced-setup-considerations">Advanced Setup Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/deploy_mspass_on_HPC.html">Deploying MsPASS on an HPC cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/deploy_mspass_with_conda_and_coiled.html">Deploy MsPASS with Conda and Coiled</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started_overview.html">MsPASS Virtual Cluster Concepts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/introduction.html">Introduction</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/database_concepts.html">Database Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/CRUD_operations.html">CRUD Operations in MsPASS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/mongodb_and_mspass.html">Using MongoDB with MsPASS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/normalization.html">Normalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/importing_tabular_data.html">Importing Tabular Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Seismic Data Objects</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/data_object_design_concepts.html">Data Object Design Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/numpy_scipy_interface.html">Using numpy/scipy with MsPASS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/obspy_interface.html">Using ObsPy with MsPASS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/time_standard_constraints.html">Time Standard Constraints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/processing_history_concepts.html">Processing History Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/continuous_data.html">Continuous Data Handling with MsPASS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/schema_choices.html">What database schema should I use?</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Processing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/algorithms.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/importing_data.html">Importing Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/handling_errors.html">Handling Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/data_editing.html">Data Editing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/cleaning_metadata.html">Cleaning Inconsistent Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/header_math.html">Header (Metadata) Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/graphics.html">Graphics in MsPASS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/signal_to_noise.html">Signal to Noise Ratio Estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/adapting_algorithms.html">Adapting an Existing Algorithm to MsPASS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">System Tuning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/parallel_processing.html">Parallel Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/memory_management.html">Memory Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/io.html">I/O in MsPASS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/parallel_io.html">Parallel IO in MsPASS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/FAQ.html">Frequency Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/development_strategies.html">How do I develop a new workflow from scratch?</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../python_api/index.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cxx_api/index.html">C++ API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">MsPASS Schema</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#all-valid-attributes">All Valid Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#master-documents-for-normalized-attributes">Master Documents for Normalized Attributes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#site-collection-receiver-coordinates">Site Collection (Receiver coordinates)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#source-collection-seismic-source-coordinates">Source Collection (Seismic Source coordinates)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#attributes-with-conceptual-relationship">Attributes with Conceptual Relationship</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#obspy-trace-object">ObsPy Trace Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="#channel-sitechan-attributes">Channel (sitechan) Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#seismic-phase-related-attributes">Seismic Phase Related Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#external-file-attributes">External File Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#indexing-attributes-for-mongodb">Indexing Attributes for MongoDb</a></li>
</ul>
</li>
</ul>
</li>
</ul>

    <a href= "../genindex.html">Index</a>
  
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MsPASS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">MsPASS Schema</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/mspass-team/mspass/blob/master/docs/source/mspass_schema/mspass_schema.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="mspass-schema">
<span id="id1"></span><h1>MsPASS Schema<a class="headerlink" href="#mspass-schema" title="Permalink to this heading"></a></h1>
<p>May seismologists think of a database schema as the specification of a set of
tables and attributes in a relational database schema.  The standard one in
seismology is that defined decades ago by the Center for Seismic Studies
commonly referred to as CSS3.0 in, for example, Antelope.  In computer
science, however, the term has a more abstract definition.  For a readable
description follow <a class="reference external" href="https://en.wikipedia.org/wiki/Database_schema">this link</a>
to a short article in Wikipedia.  We use schema in the broader sense defined
in that article because MsPASS utilizes the nonSQL (not relational) database
called MongoDB.</p>
<p>This section addresses two key topics about the MsPaSS schema:</p>
<p>1. The atomic object in MongoDB is a name-value pair.  This section contains
a table of all recognized keys, the data types that we assume are associated
with each key, and the short verbal description of the concept that the value
associated with the key defines.  The document also contains a set of useful
subsets of the full table that contain attributes that have an association.
For example, one table defines attributes related to a sensors position
on the Earth.  (Note “table” is this context is what normal people would
understand as a table and has nothing to do with relation in a relational
database)</p>
<p>2. As noted above some name-value pairs have a conceptual relationship like
sensor location attributes.  That idea plays a fundamental role in
defining constraints on relations in a relational database.  In MsPASS
such associations can be either conceptual or imposed as a loose a constraint.
An example of a conceptual constrain is the table below showing attributes that
define a transformation matrix for three-component seismic data.  The constraint
there is conceptual because the user needs to understand what they are and how
they are used, but the database itself simply treats them as just one of
many possible name-value pairs.  In contrast, source and receiver
location attributes have internal constraints in MongoDB.  In particular, some
sets of attributes like source and receiver coordinates use what
MongoDB calls the
<a class="reference external" href="https://docs.mongodb.com/manual/core/data-model-design/">normalized data model</a> .
Normalized data have a central home in a separate collection from the wf
collection that links one-to-one with each waveform data object that defines
your data set.  All normalized attributes are defined in separate tables below.</p>
<p>Finish later here with a roadmap with links to tables below.</p>
<section id="all-valid-attributes">
<h2>All Valid Attributes<a class="headerlink" href="#all-valid-attributes" title="Permalink to this heading"></a></h2>
<p>The table below defines all attributes MsPaSS should handle without special
treatment.  They are arranged in alphabetical order. (Note all keys are
case sensitive.  In UTF-8 alphabetical order capitals appear before lower case.)</p>
<p>The key in the master list above is always used the index to locate a attribute
for a particular concept in MongoDB.   However, MsPaSS also implements a generic
alias mechanism that allows a function to fetch an attribute internally
(i.e. when the data are in memory for processing) using an alternative name (alias).
The table below defines all valid aliases for unique keys with the alias keys
separated by colons:</p>
</section>
<section id="master-documents-for-normalized-attributes">
<h2>Master Documents for Normalized Attributes<a class="headerlink" href="#master-documents-for-normalized-attributes" title="Permalink to this heading"></a></h2>
<section id="site-collection-receiver-coordinates">
<h3>Site Collection (Receiver coordinates)<a class="headerlink" href="#site-collection-receiver-coordinates" title="Permalink to this heading"></a></h3>
<p>This set of attributes are used to define the physical location of a seismic sensor
on the Earth.   Also listed are related attributes used for cross referencing
with a collection with the special name ‘site’.</p>
</section>
<section id="source-collection-seismic-source-coordinates">
<h3>Source Collection (Seismic Source coordinates)<a class="headerlink" href="#source-collection-seismic-source-coordinates" title="Permalink to this heading"></a></h3>
<p>This set of attributes are used to define location estimates or measured
locations of seismic sources.   MsPASS does not support the concept of
multiple location estimates for the same seismic events that is a major
complication in the relational database schema CSS3.0 used, for example,
in Antelope.   Each source defined by the unique id:  source_id defined in the table below.</p>
</section>
</section>
<section id="attributes-with-conceptual-relationship">
<h2>Attributes with Conceptual Relationship<a class="headerlink" href="#attributes-with-conceptual-relationship" title="Permalink to this heading"></a></h2>
<section id="obspy-trace-object">
<h3>ObsPy Trace Object<a class="headerlink" href="#obspy-trace-object" title="Permalink to this heading"></a></h3>
<p>The obspy package on which MsPASS leans heavily defines a Trace object with
a fixed set of required parameters.  The names can be aliased but the
unique keys of all of the attributes below are identical to the name defined
for the obspy Trace object.</p>
</section>
<section id="channel-sitechan-attributes">
<h3>Channel (sitechan) Attributes<a class="headerlink" href="#channel-sitechan-attributes" title="Permalink to this heading"></a></h3>
</section>
<section id="seismic-phase-related-attributes">
<h3>Seismic Phase Related Attributes<a class="headerlink" href="#seismic-phase-related-attributes" title="Permalink to this heading"></a></h3>
</section>
<section id="external-file-attributes">
<h3>External File Attributes<a class="headerlink" href="#external-file-attributes" title="Permalink to this heading"></a></h3>
</section>
<section id="indexing-attributes-for-mongodb">
<h3>Indexing Attributes for MongoDb<a class="headerlink" href="#indexing-attributes-for-mongodb" title="Permalink to this heading"></a></h3>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../cxx_api/mspass.seismic.Seismogram.html" class="btn btn-neutral float-left" title="mspass::seismic::Seismogram" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2021, Ian Wang.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>