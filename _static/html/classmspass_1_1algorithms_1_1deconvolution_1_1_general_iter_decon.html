<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MsPASS C++ API: mspass::algorithms::deconvolution::GeneralIterDecon Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script src="striped_bg.js"></script>
<link href="that_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"> version
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">Defines the C++ API for MsPASS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>mspass</b></li><li class="navelem"><b>algorithms</b></li><li class="navelem"><b>deconvolution</b></li><li class="navelem"><a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_general_iter_decon.html">GeneralIterDecon</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmspass_1_1algorithms_1_1deconvolution_1_1_general_iter_decon-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mspass::algorithms::deconvolution::GeneralIterDecon Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implements the Generalized Iterative Method of Wang and Pavlis.  
 <a href="classmspass_1_1algorithms_1_1deconvolution_1_1_general_iter_decon.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_general_iter_decon_8h_source.html">GeneralIterDecon.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for mspass::algorithms::deconvolution::GeneralIterDecon:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classmspass_1_1algorithms_1_1deconvolution_1_1_general_iter_decon.png" usemap="#mspass::algorithms::deconvolution::GeneralIterDecon_map" alt=""/>
  <map id="mspass::algorithms::deconvolution::GeneralIterDecon_map" name="mspass::algorithms::deconvolution::GeneralIterDecon_map">
<area href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html" title="Base class decon operator for single station 3C decon (receiver functions)." alt="mspass::algorithms::deconvolution::ScalarDecon" shape="rect" coords="0,56,326,80"/>
<area href="classmspass_1_1algorithms_1_1deconvolution_1_1_basic_decon_operator.html" alt="mspass::algorithms::deconvolution::BasicDeconOperator" shape="rect" coords="0,0,326,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a716eeb950de422de7aceb5514accd9f5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_general_iter_decon.html#a716eeb950de422de7aceb5514accd9f5">GeneralIterDecon</a> (<a class="el" href="classmspass_1_1utility_1_1_antelope_pf.html">mspass::utility::AntelopePf</a> &amp;md)</td></tr>
<tr class="memdesc:a716eeb950de422de7aceb5514accd9f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an initialize an operator for subseqquent processing.  <a href="classmspass_1_1algorithms_1_1deconvolution_1_1_general_iter_decon.html#a716eeb950de422de7aceb5514accd9f5">More...</a><br /></td></tr>
<tr class="separator:a716eeb950de422de7aceb5514accd9f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a592222a71497eaad44f75ace74e7fad6"><td class="memItemLeft" align="right" valign="top"><a id="a592222a71497eaad44f75ace74e7fad6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>GeneralIterDecon</b> (const <a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_general_iter_decon.html">GeneralIterDecon</a> &amp;parent)</td></tr>
<tr class="separator:a592222a71497eaad44f75ace74e7fad6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8231338852f209b1008e2af52b25857"><td class="memItemLeft" align="right" valign="top"><a id="ae8231338852f209b1008e2af52b25857"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>changeparameter</b> (const <a class="el" href="classmspass_1_1utility_1_1_metadata.html">mspass::utility::Metadata</a> &amp;md)</td></tr>
<tr class="separator:ae8231338852f209b1008e2af52b25857"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50a16a47e52706b7dfef38f6dee72836"><td class="memItemLeft" align="right" valign="top"><a id="a50a16a47e52706b7dfef38f6dee72836"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>load</b> (const <a class="el" href="classmspass_1_1seismic_1_1_core_seismogram.html">mspass::seismic::CoreSeismogram</a> &amp;d, <a class="el" href="classmspass_1_1algorithms_1_1_time_window.html">mspass::algorithms::TimeWindow</a> dwin)</td></tr>
<tr class="separator:a50a16a47e52706b7dfef38f6dee72836"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37baca49bbe0988e1239b8a620f99b22"><td class="memItemLeft" align="right" valign="top"><a id="a37baca49bbe0988e1239b8a620f99b22"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>loadnoise</b> (const <a class="el" href="classmspass_1_1seismic_1_1_core_seismogram.html">mspass::seismic::CoreSeismogram</a> &amp;d, <a class="el" href="classmspass_1_1algorithms_1_1_time_window.html">mspass::algorithms::TimeWindow</a> nwin)</td></tr>
<tr class="separator:a37baca49bbe0988e1239b8a620f99b22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2894752499825e57d515990ceca787f8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_general_iter_decon.html#a2894752499825e57d515990ceca787f8">load</a> (const <a class="el" href="classmspass_1_1seismic_1_1_core_seismogram.html">mspass::seismic::CoreSeismogram</a> &amp;d, <a class="el" href="classmspass_1_1algorithms_1_1_time_window.html">mspass::algorithms::TimeWindow</a> dwin, <a class="el" href="classmspass_1_1algorithms_1_1_time_window.html">mspass::algorithms::TimeWindow</a> nwin)</td></tr>
<tr class="memdesc:a2894752499825e57d515990ceca787f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load all needed data and process.  <a href="classmspass_1_1algorithms_1_1deconvolution_1_1_general_iter_decon.html#a2894752499825e57d515990ceca787f8">More...</a><br /></td></tr>
<tr class="separator:a2894752499825e57d515990ceca787f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4eb398a16d8584d6515beaef8e97487"><td class="memItemLeft" align="right" valign="top"><a id="ad4eb398a16d8584d6515beaef8e97487"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>process</b> ()</td></tr>
<tr class="separator:ad4eb398a16d8584d6515beaef8e97487"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad930347fa623a399fa40c8d147162030"><td class="memItemLeft" align="right" valign="top"><a id="ad930347fa623a399fa40c8d147162030"></a>
<a class="el" href="classmspass_1_1seismic_1_1_core_seismogram.html">mspass::seismic::CoreSeismogram</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getresult</b> ()</td></tr>
<tr class="separator:ad930347fa623a399fa40c8d147162030"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac12d3bedc4ffa2455cb10be832e8017c"><td class="memItemLeft" align="right" valign="top"><a id="ac12d3bedc4ffa2455cb10be832e8017c"></a>
<a class="el" href="classmspass_1_1seismic_1_1_core_time_series.html">mspass::seismic::CoreTimeSeries</a>&#160;</td><td class="memItemRight" valign="bottom"><b>ideal_output</b> ()</td></tr>
<tr class="separator:ac12d3bedc4ffa2455cb10be832e8017c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42ff385ce109add3972d5a8f6186878e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmspass_1_1seismic_1_1_core_time_series.html">mspass::seismic::CoreTimeSeries</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_general_iter_decon.html#a42ff385ce109add3972d5a8f6186878e">actual_output</a> ()</td></tr>
<tr class="separator:a42ff385ce109add3972d5a8f6186878e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0aa34a6a8703f3bc9d069538103e910c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmspass_1_1seismic_1_1_core_time_series.html">mspass::seismic::CoreTimeSeries</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_general_iter_decon.html#a0aa34a6a8703f3bc9d069538103e910c">inverse_wavelet</a> ()</td></tr>
<tr class="memdesc:a0aa34a6a8703f3bc9d069538103e910c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a FIR represention of the inverse filter.  <a href="classmspass_1_1algorithms_1_1deconvolution_1_1_general_iter_decon.html#a0aa34a6a8703f3bc9d069538103e910c">More...</a><br /></td></tr>
<tr class="separator:a0aa34a6a8703f3bc9d069538103e910c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab953df1fd684513a45ba76473632ab93"><td class="memItemLeft" align="right" valign="top"><a id="ab953df1fd684513a45ba76473632ab93"></a>
<a class="el" href="classmspass_1_1seismic_1_1_core_time_series.html">mspass::seismic::CoreTimeSeries</a>&#160;</td><td class="memItemRight" valign="bottom"><b>inverse_wavelet</b> (double t0parent)</td></tr>
<tr class="separator:ab953df1fd684513a45ba76473632ab93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a788a9a7f1f0e7a9fcdedfb4625b98474"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmspass_1_1utility_1_1_metadata.html">mspass::utility::Metadata</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_general_iter_decon.html#a788a9a7f1f0e7a9fcdedfb4625b98474">QCMetrics</a> ()</td></tr>
<tr class="memdesc:a788a9a7f1f0e7a9fcdedfb4625b98474"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return appropriate quality measures.  <a href="classmspass_1_1algorithms_1_1deconvolution_1_1_general_iter_decon.html#a788a9a7f1f0e7a9fcdedfb4625b98474">More...</a><br /></td></tr>
<tr class="separator:a788a9a7f1f0e7a9fcdedfb4625b98474"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html">mspass::algorithms::deconvolution::ScalarDecon</a></td></tr>
<tr class="memitem:ab7e5ecd4bce2d9da9cb7724cf0c50690 inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memItemLeft" align="right" valign="top"><a id="ab7e5ecd4bce2d9da9cb7724cf0c50690"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ScalarDecon</b> (const <a class="el" href="classmspass_1_1utility_1_1_metadata.html">mspass::utility::Metadata</a> &amp;md)</td></tr>
<tr class="separator:ab7e5ecd4bce2d9da9cb7724cf0c50690 inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e500a76366d00c1b1d6ebc03084668e inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memItemLeft" align="right" valign="top"><a id="a5e500a76366d00c1b1d6ebc03084668e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ScalarDecon</b> (const std::vector&lt; double &gt; &amp;d, const std::vector&lt; double &gt; &amp;w)</td></tr>
<tr class="separator:a5e500a76366d00c1b1d6ebc03084668e inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2488963949a1161f7a3b4f908a78807 inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memItemLeft" align="right" valign="top"><a id="ae2488963949a1161f7a3b4f908a78807"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ScalarDecon</b> (const <a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html">ScalarDecon</a> &amp;parent)</td></tr>
<tr class="separator:ae2488963949a1161f7a3b4f908a78807 inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9478e366652c54b4331e14b5a0eb85ea inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html#a9478e366652c54b4331e14b5a0eb85ea">load</a> (const std::vector&lt; double &gt; &amp;wavelet, const std::vector&lt; double &gt; &amp;data)</td></tr>
<tr class="memdesc:a9478e366652c54b4331e14b5a0eb85ea inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load all data required for decon.  <a href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html#a9478e366652c54b4331e14b5a0eb85ea">More...</a><br /></td></tr>
<tr class="separator:a9478e366652c54b4331e14b5a0eb85ea inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac358e4143a01c4f979f3f09e401b8e7c inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html#ac358e4143a01c4f979f3f09e401b8e7c">loaddata</a> (const std::vector&lt; double &gt; &amp;data)</td></tr>
<tr class="separator:ac358e4143a01c4f979f3f09e401b8e7c inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfb57cb76746708723cac9a860221f2e inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html#abfb57cb76746708723cac9a860221f2e">loadwavelet</a> (const std::vector&lt; double &gt; &amp;wavelet)</td></tr>
<tr class="separator:abfb57cb76746708723cac9a860221f2e inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87e82a9c95e7d55501e24e1cc95508f1 inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memItemLeft" align="right" valign="top"><a id="a87e82a9c95e7d55501e24e1cc95508f1"></a>
<a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html">ScalarDecon</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html">ScalarDecon</a> &amp;parent)</td></tr>
<tr class="separator:a87e82a9c95e7d55501e24e1cc95508f1 inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20e3f9d20030f45bafc72cec73644d34 inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memItemLeft" align="right" valign="top"><a id="a20e3f9d20030f45bafc72cec73644d34"></a>
std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>getresult</b> ()</td></tr>
<tr class="separator:a20e3f9d20030f45bafc72cec73644d34 inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cf90914fa1571e88978b0b810fad805 inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memItemLeft" align="right" valign="top"><a id="a8cf90914fa1571e88978b0b810fad805"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>changeparameter</b> (const <a class="el" href="classmspass_1_1utility_1_1_metadata.html">mspass::utility::Metadata</a> &amp;md)</td></tr>
<tr class="separator:a8cf90914fa1571e88978b0b810fad805 inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94a28202041cf426f01ef1e10032c744 inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html#a94a28202041cf426f01ef1e10032c744">change_shaping_wavelet</a> (const <a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_shaping_wavelet.html">ShapingWavelet</a> &amp;nsw)</td></tr>
<tr class="separator:a94a28202041cf426f01ef1e10032c744 inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a889e54f83b86f0bb0087ba3da18db14e inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memItemLeft" align="right" valign="top"><a id="a889e54f83b86f0bb0087ba3da18db14e"></a>
<a class="el" href="classmspass_1_1seismic_1_1_core_time_series.html">mspass::seismic::CoreTimeSeries</a>&#160;</td><td class="memItemRight" valign="bottom"><b>ideal_output</b> ()</td></tr>
<tr class="separator:a889e54f83b86f0bb0087ba3da18db14e inherit pub_methods_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html">mspass::algorithms::deconvolution::ScalarDecon</a></td></tr>
<tr class="memitem:a3352f80170606ad4b543493a9168bc9d inherit pro_attribs_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memItemLeft" align="right" valign="top"><a id="a3352f80170606ad4b543493a9168bc9d"></a>
std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>data</b></td></tr>
<tr class="separator:a3352f80170606ad4b543493a9168bc9d inherit pro_attribs_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa48f2182a7e7b1c7d63011a9c53c4ee1 inherit pro_attribs_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memItemLeft" align="right" valign="top"><a id="aa48f2182a7e7b1c7d63011a9c53c4ee1"></a>
std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>wavelet</b></td></tr>
<tr class="separator:aa48f2182a7e7b1c7d63011a9c53c4ee1 inherit pro_attribs_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0be7fa5b5fcf4928874f0e4c3c6a2022 inherit pro_attribs_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memItemLeft" align="right" valign="top"><a id="a0be7fa5b5fcf4928874f0e4c3c6a2022"></a>
std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>result</b></td></tr>
<tr class="separator:a0be7fa5b5fcf4928874f0e4c3c6a2022 inherit pro_attribs_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0fe50f72e9cea048e1fa13061c26010 inherit pro_attribs_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memItemLeft" align="right" valign="top"><a id="ae0fe50f72e9cea048e1fa13061c26010"></a>
<a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_shaping_wavelet.html">ShapingWavelet</a>&#160;</td><td class="memItemRight" valign="bottom"><b>shapingwavelet</b></td></tr>
<tr class="separator:ae0fe50f72e9cea048e1fa13061c26010 inherit pro_attribs_classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements the Generalized Iterative Method of Wang and Pavlis. </p>
<p>This class is an extension of the idea o the generalized iterative method described in the paper by Wang and Pavlis. Their original paper worked on scalar seismograms. This implemenation differs by iterating on the vector data effectively reducing a 3c seismogram to a sequence of 3D vectors at computed lags. The iterative reduction then iterates on the data matrix. In addition, Wang's original implementation did the iteration by repeated forward and inverse fourier transforms. This algorithm works completely in the time domain.</p>
<p>The class retains a concept Wang used in the original implementation. Many OOP books stress the idea of construction is initialization. That is not pruddent fo this case since construction involves some work that we do not want to repeat for each new seismogram. Hence, construction only initializes parameters required to run the algorithm. Calculation is triggered by calling one of the two overloaded load methods. The user should be warned, however, that we did not build ina test to assure the noise and signal windows are consistent. Anyone wanting to use this code outside of applications developed by the authors must recognize That the assure consistency they need to call loadnoise before load OR call only the load method that includes a signal and noise window. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a716eeb950de422de7aceb5514accd9f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a716eeb950de422de7aceb5514accd9f5">&#9670;&nbsp;</a></span>GeneralIterDecon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mspass::algorithms::deconvolution::GeneralIterDecon::GeneralIterDecon </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmspass_1_1utility_1_1_antelope_pf.html">mspass::utility::AntelopePf</a> &amp;&#160;</td>
          <td class="paramname"><em>md</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an initialize an operator for subseqquent processing. </p>
<p>This is the primary constructor for this object. The PfStyleMetadata object is expected to contain a suite of parameters used to define how this operator will behave along with what inverse filter is to be constructed ans applied before the iterative algorithm is applied. The pf is required to have multiple Arr sections the components. <br  />
 </p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                                                         : ScalarDecon()</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;{</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">string</span> base_error(<span class="stringliteral">&quot;GeneralIterDecon AntelopePf contructor:  &quot;</span>);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    stringstream ss;   <span class="comment">// used for constructing error messages</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">/* The pf used for initializing this object has Antelope Arr section</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">    for each algorithm.   Since the generalized iterative method is a</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">    two-stage algorithm we have a section for the iterative algorithm</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">    and a (variable) sectin for the preprocessor algorithm.  We use</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">    the AntelopePf to parse this instead of raw antelope pfget</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">    C calls. */</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <a class="code" href="classmspass_1_1utility_1_1_antelope_pf.html">AntelopePf</a> md=mdtoplevel.<a class="code" href="classmspass_1_1utility_1_1_antelope_pf.html#a7853329ba52cc91460a435057e6a8e85">get_branch</a>(<span class="stringliteral">&quot;deconvolution_operator_type&quot;</span>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <a class="code" href="classmspass_1_1utility_1_1_antelope_pf.html">AntelopePf</a> mdgiter=md.<a class="code" href="classmspass_1_1utility_1_1_antelope_pf.html#a7853329ba52cc91460a435057e6a8e85">get_branch</a>(<span class="stringliteral">&quot;generalized_iterative_deconvolution&quot;</span>);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        IterDeconType dct = parse_for_itertype(mdgiter);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        this-&gt;decon_type=dct;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordtype">double</span> ts,te;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        ts=mdgiter.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;full_data_window_start&quot;</span>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        te=mdgiter.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;full_data_window_end&quot;</span>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        dwin=<a class="code" href="classmspass_1_1algorithms_1_1_time_window.html">TimeWindow</a>(ts,te);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        ts=mdgiter.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;deconvolution_data_window_start&quot;</span>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        te=mdgiter.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;deconvolution_data_window_end&quot;</span>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        fftwin=<a class="code" href="classmspass_1_1algorithms_1_1_time_window.html">TimeWindow</a>(ts,te);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        ts=mdgiter.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;noise_window_start&quot;</span>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        te=mdgiter.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;noise_window_end&quot;</span>);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        nwin=<a class="code" href="classmspass_1_1algorithms_1_1_time_window.html">TimeWindow</a>(ts,te);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="comment">/* We need to make sure the noise and decon windows are inside the full_data_window*/</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordflow">if</span>(fftwin.start&lt;dwin.start || fftwin.end&gt;dwin.end)</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            stringstream ss;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            ss &lt;&lt; base_error &lt;&lt; <span class="stringliteral">&quot;decon window error&quot;</span>&lt;&lt;endl</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;Wavelet inversion window is not inside analysis window&quot;</span>&lt;&lt;endl</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;full_data_window (analysis) range=&quot;</span>&lt;&lt;dwin.start&lt;&lt;<span class="stringliteral">&quot; to &quot;</span>&lt;&lt;dwin.end&lt;&lt;endl</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;decon_window (wavelet inversion) range=&quot;</span>&lt;&lt;fftwin.start&lt;&lt;<span class="stringliteral">&quot; to &quot;</span>&lt;&lt;fftwin.end&lt;&lt;endl;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="classmspass_1_1utility_1_1_ms_p_a_s_s_error.html">MsPASSError</a>(ss.str(),ErrorSeverity::Invalid);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        noise_component=mdgiter.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;noise_component&quot;</span>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordtype">double</span> target_dt=mdgiter.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;target_sample_interval&quot;</span>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keywordtype">int</span> maxns=<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>((fftwin.end-fftwin.start)/target_dt);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        ++maxns;   <span class="comment">// Add one - points not intervals</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        nfft=nextPowerOf2(maxns);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="comment">/* This should override this even if it was previously set */</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        mdgiter.put(<span class="stringliteral">&quot;operator_nfft&quot;</span>,nfft);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        this-&gt;ScalarDecon::changeparameter(mdgiter);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        shapingwavelet=ShapingWavelet(mdgiter,nfft);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="comment">/* Note minus sign here */</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        time_shift = -(dwin.start)/target_dt;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <a class="code" href="classmspass_1_1utility_1_1_antelope_pf.html">AntelopePf</a> mdleaf;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="comment">/* We make sure the window parameters in each algorithm mactch what</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">        is set for this algorithm.  Abort if they are not consistent.  The</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">        test code is a bit repetitious but a necessary evil to allow the message</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">        to be clearer. */</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordtype">int</span> n1,n2; <span class="comment">//temporaries used below -  needed because declrations illegal inside case</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">switch</span>(decon_type)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">case</span> WATER_LEVEL:</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            mdleaf=md.<a class="code" href="classmspass_1_1utility_1_1_antelope_pf.html#a7853329ba52cc91460a435057e6a8e85">get_branch</a>(<span class="stringliteral">&quot;water_level&quot;</span>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            ts=mdleaf.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;deconvolution_data_window_start&quot;</span>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            te=mdleaf.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;deconvolution_data_window_end&quot;</span>);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="keywordflow">if</span>((ts!=fftwin.start) || (te!=fftwin.end))</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                ss &lt;&lt; base_error</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                   &lt;&lt;<span class="stringliteral">&quot;water level method specification of processing window is not&quot;</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                   <span class="stringliteral">&quot; consistent with gid parameters&quot;</span>&lt;&lt;endl</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;water level parameters:  deconvolution_data_window_start=&quot;</span>&lt;&lt;ts</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;, decon_window_end=&quot;</span>&lt;&lt;te&lt;&lt;endl</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;GID parameters: decon_window_start=&quot;</span>&lt;&lt;fftwin.start</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;, decon_window_end=&quot;</span>&lt;&lt;fftwin.end&lt;&lt;endl;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                <span class="keywordflow">throw</span> <a class="code" href="classmspass_1_1utility_1_1_ms_p_a_s_s_error.html">MsPASSError</a>(ss.str(),ErrorSeverity::Invalid);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            preprocessor=<span class="keyword">new</span> WaterLevelDecon(mdleaf);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">case</span> LEAST_SQ:</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            mdleaf=md.<a class="code" href="classmspass_1_1utility_1_1_antelope_pf.html#a7853329ba52cc91460a435057e6a8e85">get_branch</a>(<span class="stringliteral">&quot;least_square&quot;</span>);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            ts=mdleaf.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;deconvolution_data_window_start&quot;</span>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            te=mdleaf.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;deconvolution_data_window_end&quot;</span>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="keywordflow">if</span>((ts!=fftwin.start) || (te!=fftwin.end))</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                ss &lt;&lt; base_error</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                   &lt;&lt;<span class="stringliteral">&quot;least square method specification of processing window is not&quot;</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                   <span class="stringliteral">&quot; consistent with gid parameters&quot;</span>&lt;&lt;endl</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;least square parameters:  deconvolution_data_window_start=&quot;</span>&lt;&lt;ts</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;, decon_window_end=&quot;</span>&lt;&lt;te&lt;&lt;endl</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;GID parameters: decon_window_start=&quot;</span>&lt;&lt;fftwin.start</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;, decon_window_end=&quot;</span>&lt;&lt;fftwin.end&lt;&lt;endl;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                <span class="keywordflow">throw</span> <a class="code" href="classmspass_1_1utility_1_1_ms_p_a_s_s_error.html">MsPASSError</a>(ss.str(),ErrorSeverity::Invalid);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            preprocessor=<span class="keyword">new</span> LeastSquareDecon(mdleaf);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">case</span> MULTI_TAPER:</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            mdleaf=md.<a class="code" href="classmspass_1_1utility_1_1_antelope_pf.html#a7853329ba52cc91460a435057e6a8e85">get_branch</a>(<span class="stringliteral">&quot;multi_taper&quot;</span>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            ts=mdleaf.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;deconvolution_data_window_start&quot;</span>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            te=mdleaf.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;deconvolution_data_window_end&quot;</span>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">if</span>((ts!=fftwin.start) || (te!=fftwin.end))</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                ss &lt;&lt; base_error</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                   &lt;&lt;<span class="stringliteral">&quot;mulittaper method specification of processing window is not&quot;</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                   <span class="stringliteral">&quot; consistent with gid parameters&quot;</span>&lt;&lt;endl</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;multitaper parameters:  deconvolution_data_window_start=&quot;</span>&lt;&lt;ts</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;, decon_window_end=&quot;</span>&lt;&lt;te&lt;&lt;endl</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;GID parameters: decon_window_start=&quot;</span>&lt;&lt;fftwin.start</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;, decon_window_end=&quot;</span>&lt;&lt;fftwin.end&lt;&lt;endl;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <span class="keywordflow">throw</span> <a class="code" href="classmspass_1_1utility_1_1_ms_p_a_s_s_error.html">MsPASSError</a>(ss.str(),ErrorSeverity::Invalid);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="comment">/* Here we also have to test the noise parameters, but the gid</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">            window can be different fromt that passed to the mulittaper method.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">            Hence we test only that the mulittaper noise window is within the bounds</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">            of the gid noise window */</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            n1=<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>((fftwin.end-fftwin.start)/target_dt)+1;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            n2=<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>((nwin.end-nwin.start)/target_dt)+1;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="keywordflow">if</span>(n1&gt;n2)</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                ss &lt;&lt; base_error &lt;&lt; <span class="stringliteral">&quot;inconsistent noise window specification&quot;</span>&lt;&lt;endl</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;multitaper parameters specify taper length=&quot;</span>&lt;&lt;n1&lt;&lt;<span class="stringliteral">&quot; samples&quot;</span>&lt;&lt;endl</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;GID noise window parameters define noise_window_start=&quot;</span>&lt;&lt;nwin.start</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot; and noise_window_end=&quot;</span>&lt;&lt;nwin.end&lt;&lt;endl</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;The GID window has a length of &quot;</span>&lt;&lt;n2&lt;&lt;<span class="stringliteral">&quot; samples&quot;</span>&lt;&lt;endl</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;GID implementation insists multitaper noise window be smaller or equal to GID noise window&quot;</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                   &lt;&lt;endl;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                <span class="keywordflow">throw</span> <a class="code" href="classmspass_1_1utility_1_1_ms_p_a_s_s_error.html">MsPASSError</a>(ss.str(),ErrorSeverity::Invalid);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            preprocessor=<span class="keyword">new</span> MultiTaperXcorDecon(mdleaf);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        };</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="comment">/* Because this may evolve we make this a private method to</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">        make changes easier to implement. */</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        this-&gt;construct_weight_penalty_function(mdgiter);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="comment">/* Set convergencd parameters from md keys */</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        iter_max=mdgiter.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;maximum_iterations&quot;</span>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        lw_linf_floor=mdgiter.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;lag_weight_Linf_floor&quot;</span>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        lw_l2_floor=mdgiter.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;lag_weight_rms_floor&quot;</span>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        resid_linf_prob=mdgiter.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;residual_noise_rms_probability_floor&quot;</span>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        resid_l2_tol=mdgiter.<a class="code" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">get</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;residual_fractional_improvement_floor&quot;</span>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    } <span class="keywordflow">catch</span>(...) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="keywordflow">throw</span>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    };</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">mspass::utility::Metadata::get()</a>, and <a class="el" href="classmspass_1_1utility_1_1_antelope_pf.html#a7853329ba52cc91460a435057e6a8e85">mspass::utility::AntelopePf::get_branch()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a42ff385ce109add3972d5a8f6186878e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42ff385ce109add3972d5a8f6186878e">&#9670;&nbsp;</a></span>actual_output()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmspass_1_1seismic_1_1_core_time_series.html">mspass::seismic::CoreTimeSeries</a> mspass::algorithms::deconvolution::GeneralIterDecon::actual_output </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>\brif Return the actual output of the deconvolution operator.</p>
<p>The actual output is defined as w^-1*w and is compable to resolution kernels in linear inverse theory. Although not required we would normally expect this function to be peaked at 0. Offsets from 0 would imply a bias. </p>

<p>Implements <a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html#a84f320ad48e8bfc9c292f8dde33c0593">mspass::algorithms::deconvolution::ScalarDecon</a>.</p>
<div class="fragment"><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                                                {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">return</span> this-&gt;preprocessor-&gt;<a class="code" href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html#a84f320ad48e8bfc9c292f8dde33c0593">actual_output</a>();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    };</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html#a84f320ad48e8bfc9c292f8dde33c0593">mspass::algorithms::deconvolution::ScalarDecon::actual_output()</a>.</p>

</div>
</div>
<a id="a0aa34a6a8703f3bc9d069538103e910c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0aa34a6a8703f3bc9d069538103e910c">&#9670;&nbsp;</a></span>inverse_wavelet()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmspass_1_1seismic_1_1_core_time_series.html">mspass::seismic::CoreTimeSeries</a> mspass::algorithms::deconvolution::GeneralIterDecon::inverse_wavelet </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a FIR represention of the inverse filter. </p>
<p>After any deconvolution is computed one can sometimes produce a finite impulse response (FIR) respresentation of the inverse filter. <br  />
 </p>

<p>Implements <a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html#a078d038467a3be52d1e91e0d080d503e">mspass::algorithms::deconvolution::ScalarDecon</a>.</p>
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                                                  {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">return</span> this-&gt;preprocessor-&gt;<a class="code" href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html#a078d038467a3be52d1e91e0d080d503e">inverse_wavelet</a>();</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    };</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html#a078d038467a3be52d1e91e0d080d503e">mspass::algorithms::deconvolution::ScalarDecon::inverse_wavelet()</a>.</p>

</div>
</div>
<a id="a2894752499825e57d515990ceca787f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2894752499825e57d515990ceca787f8">&#9670;&nbsp;</a></span>load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mspass::algorithms::deconvolution::GeneralIterDecon::load </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmspass_1_1seismic_1_1_core_seismogram.html">mspass::seismic::CoreSeismogram</a> &amp;&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmspass_1_1algorithms_1_1_time_window.html">mspass::algorithms::TimeWindow</a>&#160;</td>
          <td class="paramname"><em>dwin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmspass_1_1algorithms_1_1_time_window.html">mspass::algorithms::TimeWindow</a>&#160;</td>
          <td class="paramname"><em>nwin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load all needed data and process. </p>
<p>This method is little more than a call to loadnoise followed immediately by a call to load that is assumed to initiate the computation. </p>
<div class="fragment"><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;{</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordtype">int</span> iretn, iret;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        iretn=this-&gt;loadnoise(draw,nwin);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        iret=this-&gt;load(draw,dwin);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">return</span> (iretn+iret);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    } <span class="keywordflow">catch</span>(...) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">throw</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    };</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a788a9a7f1f0e7a9fcdedfb4625b98474"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a788a9a7f1f0e7a9fcdedfb4625b98474">&#9670;&nbsp;</a></span>QCMetrics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmspass_1_1utility_1_1_metadata.html">Metadata</a> mspass::algorithms::deconvolution::GeneralIterDecon::QCMetrics </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return appropriate quality measures. </p>
<p>Each operator commonly has different was to measure the quality of the result. This method should return these in a generic Metadata object. </p>

<p>Implements <a class="el" href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html#af683c2f25e91155c2bc1f81f9b62bbb1">mspass::algorithms::deconvolution::ScalarDecon</a>.</p>
<div class="fragment"><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;{</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;QCMetrics method not yet implemented&quot;</span>&lt;&lt;endl;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    exit(-1);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/runner/work/mspass/mspass/cxx/include/mspass/algorithms/deconvolution/<a class="el" href="_general_iter_decon_8h_source.html">GeneralIterDecon.h</a></li>
<li>/home/runner/work/mspass/mspass/cxx/src/lib/algorithms/deconvolution/GeneralIterDecon.cc</li>
</ul>
</div><!-- contents -->
<div class="ttc" id="aclassmspass_1_1utility_1_1_antelope_pf_html"><div class="ttname"><a href="classmspass_1_1utility_1_1_antelope_pf.html">mspass::utility::AntelopePf</a></div><div class="ttdoc">C++ object version of a parameter file.</div><div class="ttdef"><b>Definition:</b> AntelopePf.h:61</div></div>
<div class="ttc" id="aclassmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon_html_a078d038467a3be52d1e91e0d080d503e"><div class="ttname"><a href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html#a078d038467a3be52d1e91e0d080d503e">mspass::algorithms::deconvolution::ScalarDecon::inverse_wavelet</a></div><div class="ttdeci">virtual mspass::seismic::CoreTimeSeries inverse_wavelet()=0</div><div class="ttdoc">Return a FIR represention of the inverse filter.</div></div>
<div class="ttc" id="aclassmspass_1_1algorithms_1_1_time_window_html"><div class="ttname"><a href="classmspass_1_1algorithms_1_1_time_window.html">mspass::algorithms::TimeWindow</a></div><div class="ttdoc">Defines a time window.</div><div class="ttdef"><b>Definition:</b> TimeWindow.h:13</div></div>
<div class="ttc" id="aclassmspass_1_1utility_1_1_antelope_pf_html_a7853329ba52cc91460a435057e6a8e85"><div class="ttname"><a href="classmspass_1_1utility_1_1_antelope_pf.html#a7853329ba52cc91460a435057e6a8e85">mspass::utility::AntelopePf::get_branch</a></div><div class="ttdeci">AntelopePf get_branch(const std::string key) const</div><div class="ttdoc">used for subtrees (nested Arrs in antelope)</div><div class="ttdef"><b>Definition:</b> AntelopePf.cc:399</div></div>
<div class="ttc" id="aclassmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon_html_a84f320ad48e8bfc9c292f8dde33c0593"><div class="ttname"><a href="classmspass_1_1algorithms_1_1deconvolution_1_1_scalar_decon.html#a84f320ad48e8bfc9c292f8dde33c0593">mspass::algorithms::deconvolution::ScalarDecon::actual_output</a></div><div class="ttdeci">virtual mspass::seismic::CoreTimeSeries actual_output()=0</div></div>
<div class="ttc" id="aclassmspass_1_1utility_1_1_metadata_html_af2b1cac0f295d9ab5fb240b8b5e12539"><div class="ttname"><a href="classmspass_1_1utility_1_1_metadata.html#af2b1cac0f295d9ab5fb240b8b5e12539">mspass::utility::Metadata::get</a></div><div class="ttdeci">T get(const std::string key) const</div><div class="ttdef"><b>Definition:</b> Metadata.h:472</div></div>
<div class="ttc" id="aclassmspass_1_1utility_1_1_ms_p_a_s_s_error_html"><div class="ttname"><a href="classmspass_1_1utility_1_1_ms_p_a_s_s_error.html">mspass::utility::MsPASSError</a></div><div class="ttdoc">Base class for error object thrown by MsPASS library routines.</div><div class="ttdef"><b>Definition:</b> MsPASSError.h:39</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
